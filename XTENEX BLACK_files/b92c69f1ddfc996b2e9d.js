(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1021:function(t,e,o){"use strict";var r=o(525);o.n(r).a},1022:function(t,e,o){(t.exports=o(30)(!1)).push([t.i,".customer-csv-modal .title[data-v-2ca06f60]{font-weight:700;line-height:1.5;margin-bottom:16px;font-size:20px}.customer-csv-modal .customer-csv-line[data-v-2ca06f60]{margin:0 -24px;padding:0 24px}.customer-csv-modal .customer-csv-line[data-v-2ca06f60]:hover{background-color:hsla(0,0%,93.3%,.3)}.customer-csv-modal .customer-csv-line .customer-csv-button[data-v-2ca06f60]{width:100%;border-top:1px solid #eee;border-bottom:1px solid #eee;box-sizing:border-box;display:flex;align-items:center;cursor:pointer}.customer-csv-modal .customer-csv-line .customer-csv-button .customer-csv-icon[data-v-2ca06f60]{display:inline-flex;justify-content:center;align-items:center;width:32px;height:32px;border-radius:2px;background-color:#1b629b;margin:12px 16px 12px 0}.customer-csv-modal .customer-csv-line .customer-csv-button .label[data-v-2ca06f60]{display:inline;font-weight:700;letter-spacing:.4px;line-height:21px;padding-left:8px}",""])},1023:function(t,e,o){"use strict";var r=o(526);o.n(r).a},1024:function(t,e,o){(t.exports=o(30)(!1)).push([t.i,".customers-page .title[data-v-1b570259]{color:#555}.customers-page .csv-setting[data-v-1b570259]{cursor:pointer}",""])},1565:function(t,e,o){"use strict";o.r(e);var r=o(416),n=o(417),c=o(963),l=o(853),d=(o(16),o(15),o(10),o(9),o(14),o(2)),m=(o(23),o(1)),v=o(483);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(source,!0).forEach(function(e){Object(d.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var w,y={name:"CustomerCsvModal",props:{isShowDialog:{type:Boolean,default:!1},customerQuery:{type:Object,required:!0}},data:function(){return{innerVisible:!1,downloading:!1}},watch:{isShowDialog:function(t){this.innerVisible=t}},methods:{onClosed:function(){this.$emit("closed")},downloadCsv:(w=Object(m.a)(regeneratorRuntime.mark(function t(){var e,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.downloading){t.next=2;break}return t.abrupt("return");case 2:return this.downloading=!0,t.prev=3,t.next=6,Object(v.b)(this.$axios,h({},this.customerQuery.toParams()));case 6:e=t.sent,window.navigator.msSaveBlob?window.navigator.msSaveBlob(e,"customers.csv"):(o=(window.URL||window.webkitURL).createObjectURL(e),(r=document.getElementById("download")).href=o,r.click(),r.href="#"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),this.$notify.error("通信に失敗しました");case 13:return t.prev=13,this.downloading=!1,t.finish(13);case 16:case"end":return t.stop()}},t,this,[[3,10,13,16]])})),function(){return w.apply(this,arguments)})}},x=(o(1021),o(8)),C=Object(x.a)(y,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"customer-csv-modal"},[o("StDialog",{attrs:{visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e},closed:t.onClosed},scopedSlots:t._u([{key:"default",fn:function(){return[o("div",{staticClass:"title"},[t._v("\n        オプション\n      ")]),t._v(" "),o("div",{staticClass:"customer-csv-line",on:{click:t.downloadCsv}},[o("div",{staticClass:"customer-csv-button"},[o("div",{staticClass:"customer-csv-icon"},[o("StIcon",{attrs:{icon:"customer_csv",color:"#fff"}})],1),t._v(" "),o("div",{staticClass:"label"},[t._v("顧客管理CSV出力")])])])]},proxy:!0}])}),t._v(" "),o("StLink",{attrs:{id:"download",href:"#",download:"customers.csv"}})],1)},[],!1,null,"2ca06f60",null).exports,S={name:"Customers",components:{MainSlot:r.a,PageTitle:n.a,CustomersTemplate:c.a,CustomerCsvModal:C},layout:"dashboard",mixins:[l.a],data:function(){return{customers:[],options:{},params:{},customerQuery:{},customerSummary:{},isShowCsvModal:!1,errorMessage:""}},computed:{hasCustomer:function(){return!this.errorMessage&&this.customerSummary.total>0}}},O=(o(1023),Object(x.a)(S,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"customers-page"},[o("MainSlot",{scopedSlots:t._u([{key:"title",fn:function(){return[o("PageTitle",{attrs:{title:"顧客リスト",mode:"pc"},scopedSlots:t._u([{key:"note",fn:function(){return[o("StLink",{attrs:{href:t.m.MAGAZINE_URL,target:"_blank",rel:"noopener noreferrer"}},[o("StIcon",{attrs:{icon:"help",color:"#888"}})],1)]},proxy:!0},{key:"option",fn:function(){return[t.hasCustomer?o("div",{staticClass:"csv-setting",on:{click:function(e){t.isShowCsvModal=!0}}},[o("StButton",{attrs:{size:"small",icon:"setting",iconColor:"#888"}})],1):t._e()]},proxy:!0}])})]},proxy:!0},{key:"contents",fn:function(){return[t.errorMessage?t._e():o("CustomersTemplate",{attrs:{isEnabledAddon:t.isEnabledAddon,customers:t.customers,options:t.options,customerQuery:t.customerQuery,customerSummary:t.customerSummary},on:{changeParams:t.changeParams,searchParams:t.searchParams,createProvisionalEmail:t.onCreateProvisionalEmail}})]},proxy:!0}])}),t._v(" "),o("CustomerCsvModal",{attrs:{isShowDialog:t.isShowCsvModal,customerQuery:t.customerQuery},on:{closed:function(e){t.isShowCsvModal=!1}}})],1)},[],!1,null,"1b570259",null));e.default=O.exports},525:function(t,e,o){var content=o(1022);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("23ae825a",content,!0,{sourceMap:!1})},526:function(t,e,o){var content=o(1024);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(31).default)("41105a6e",content,!0,{sourceMap:!1})}}]);